module.exports=(()=>{var e={219:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});const n=require("react");var r=s.n(n);s(593);const a="#00000099",o="#FFFFFF";class i extends r().Component{constructor(e){super(e),this.scaleImage=this.scaleImage.bind(this),this.redrawCanvas=this.redrawCanvas.bind(this),this.eraseCanvas=this.eraseCanvas.bind(this),this.returnData=this.returnData.bind(this),this.cancelCrop=this.cancelCrop.bind(this),this.toggleMovementMode=this.toggleMovementMode.bind(this),this.setPosition=this.setPosition.bind(this),this.renderDebug=this.renderDebug.bind(this),this.renderTouchPoint=this.renderTouchPoint.bind(this),this.clearMovementMode=this.clearMovementMode.bind(this),this.canvasRef=(0,n.createRef)(),this.scaleValueRef=(0,n.createRef)(),this.scaleValueDisplay=(0,n.createRef)(),this.rangeScaleRef=(0,n.createRef)(),this.sourceRef=(0,n.createRef)(),this.state={canvasWidth:this.props.width?this.props.width:window.innerWidth,canvasHeight:this.props.height?this.props.height:window.innerHeight,imageSource:this.props.src?this.props.src:null,backgroundColor:this.props.backgroundColor?this.props.backgroundColor:"#FFFFFF",moveSpeed:this.props.moveSpeed?this.props.moveSpeed:10}}componentDidMount(){this.props.src&&(this.rangeScaleRef.current.value=10,this.scaleValueRef.current.value=1,this.canvas=this.canvasRef.current,this.sourceCanvas=this.sourceRef.current,this.context=this.canvas.getContext("2d"),this.lastDown={x:0,y:0},this.x=0,this.y=0,this.scale=1,this.movement=!1,this.image=new Image,this.image.src=this.state.imageSource,this.image.onload=()=>{this.drawSourceCanvas(1),this.redrawCanvas(1)})}drawSourceCanvas(e){const t=this.sourceCanvas.getContext("2d"),s=this.image.width*e,n=this.image.height*e;this.sourceCanvas.width=s,this.sourceCanvas.height=n,t.clearRect(0,0,this.state.canvasWidth,this.state.canvasHeight),t.drawImage(this.image,0,0,s,n)}renderNoSource(){return r().createElement("div",{className:"scaler-no-source"},r().createElement("span",null,"Image source not provided."))}renderDebug(e){e.beginPath(),e.fillStyle=a,e.resetTransform(),e.rect(0,100,175,124),e.fill(),e.font="14px Arial",e.fillStyle=o,e.textAlign="left",e.fillText("DEBUGGER",5,116),e.fillText("INIT DOWN: {x: "+this.lastDown.x+", y: "+this.lastDown.y+"} ",5,130),this.renderTouchPoint(e)}renderTouchPoint(e){e.beginPath(),e.arc(this.lastDown.x,this.lastDown.y,2,0,2*Math.PI,!1),e.fillStyle="red",e.fill()}renderControls(){return r().createElement("div",{className:"react-scaler-controls"},r().createElement("div",{className:"control-segment"},r().createElement("span",null,"SCALE   "),r().createElement("input",{type:"number",ref:this.scaleValueRef,onChange:this.scaleImage,style:{display:"none"}}),r().createElement("span",{className:"scale-percent",ref:this.scaleValueDisplay},"%100")),r().createElement("div",{className:"control-segment"},r().createElement("input",{type:"range",ref:this.rangeScaleRef,step:this.props.scaleStep?this.props.scaleStep:"0.5",min:"1",max:this.props.maxScale?10*this.props.maxScale:30,onChange:this.scaleImage})),r().createElement("div",{className:"control-segment"},this.props.scaleSizes&&this.renderScaleSizes(),r().createElement("button",{onClick:this.cancelCrop},this.props.cancelLabel?this.props.cancelLabel:"Cancel"),r().createElement("button",{onClick:this.returnData},this.props.applyLabel?this.props.applyLabel:"Apply")))}renderCanvas(){return r().createElement(r().Fragment,null,r().createElement("div",{className:"react-scaler"},r().createElement("canvas",{ref:this.canvasRef,onMouseDown:this.toggleMovementMode,onMouseUp:this.clearMovementMode,onMouseLeave:this.clearMovementMode,onMouseMove:this.setPosition,width:this.state.canvasWidth,height:this.state.canvasHeight}),r().createElement("canvas",{style:{display:"none"},ref:this.sourceRef,width:this.state.canvasWidth,height:this.state.canvasHeight}),this.renderControls()))}renderScaleSizes(){return r().createElement("div",{className:"control-scale-sizes"},r().createElement("button",{onClick:()=>{this.redrawCanvas(.5)}},this.props.buttonMessage?this.props.buttonMessage:"0.5X"),r().createElement("button",{onClick:()=>{this.redrawCanvas(1)}},this.props.buttonMessage?this.props.buttonMessage:"1X"),r().createElement("button",{onClick:()=>{this.redrawCanvas(2)}},this.props.buttonMessage?this.props.buttonMessage:"2X"))}renderGrid(){const e=this.canvas.getContext("2d");e.strokeStyle=this.props.gridColor?this.props.gridColor:"#FFFFFF",e.lineWidth=.5,e.setLineDash([5]),e.beginPath(),e.moveTo(this.canvas.width/3,0),e.lineTo(this.canvas.width/3,this.canvas.height),e.stroke(),e.setLineDash([5]),e.beginPath(),e.strokeStyle=this.props.gridColor?this.props.gridColor:"#FFFFFF",e.moveTo(this.canvas.width/3*2,0),e.lineTo(this.canvas.width/3*2,this.canvas.height),e.stroke()}render(){return this.state.imageSource?this.renderCanvas():this.renderNoSource()}scaleImage(e){this.scale=e.target.value/10,this.redrawCanvas(this.scale)}redrawCanvas(e){this.scale=e,this.scaleValueRef.current.value=e,this.scaleValueDisplay.current.innerText=" % "+Math.floor(100*e),this.drawSourceCanvas(e);const t=this.canvas.getContext("2d");this.eraseCanvas(t);const s=this.image.width*e,n=this.image.height*e;t.drawImage(this.image,(this.state.canvasWidth-s)/2+this.x,(this.state.canvasHeight-n)/2+this.y,s,n),this.props.displayResolution&&this.renderResolution(t,s,n),this.props.renderDebug&&this.renderDebug(t),this.props.drawGrid&&this.renderGrid()}eraseCanvas(e){e.beginPath(),e.fillStyle=this.state.backgroundColor,e.resetTransform(),e.rect(0,0,this.state.canvasWidth,this.state.canvasHeight),e.fill()}renderResolution(e,t,s){e.beginPath(),e.fillStyle=a,e.resetTransform(),e.rect(0,0,90,24),e.fill(),e.font="14px Arial",e.fillStyle=o,e.textAlign="center",e.fillText(Math.floor(t)+" X "+Math.floor(s),45,16)}returnData(){return this.props.onScaleApply&&"function"==typeof this.props.onScaleApply&&this.props.onScaleApply(this.processImageData()),null}cancelCrop(){return this.props.onCancel&&"function"==typeof this.props.onCancel&&this.props.onCancel(),null}toggleMovementMode(e){if(this.movement=!0,this.movement){document.body.style.cursor="move";const t=e.target.getBoundingClientRect();this.lastDown={x:e.clientX-t.left,y:e.clientY-t.top},this.redrawCanvas(this.scale)}}clearMovementMode(){document.body.style.cursor="default",this.movement=!1,this.lastDown={x:0,y:0},this.redrawCanvas(this.scale)}setPosition(e){if(this.movement){const t=e.target.getBoundingClientRect(),s={x:e.clientX-t.left,y:e.clientY-t.top};s.x>this.lastDown.x?this.x+=Math.abs(this.lastDown.x-s.x):this.x-=Math.abs(this.lastDown.x-s.x),s.y>this.lastDown.y?this.y+=Math.abs(this.lastDown.y-s.y):this.y-=Math.abs(this.lastDown.y-s.y),this.lastDown=s,this.redrawCanvas(this.scale)}}determineCrop(e,t){const s=this.image.width*t+this.x,n=this.image.height*t+this.y,r=s<this.canvas.width,a=n<this.canvas.height,o=e.getImageData(r?(this.sourceCanvas.width-s)/2+this.x:0,a?(this.sourceCanvas.height-n)/2+this.y:0,s,n);return r&&(this.sourceCanvas.width=s),a&&(this.sourceCanvas.height=n),o}async processImageData(){const e=this.scaleValueRef.current.value,t=(this.canvas.getContext("2d"),this.sourceCanvas.getContext("2d")),s=t.getImageData(0,0,this.state.canvasWidth,this.state.canvasHeight);t.putImageData(s,0,0);const n=this.determineCrop(t,e);t.putImageData(n,0,0);const r=await this.sourceCanvas.toDataURL();return this.sourceCanvas.width=this.state.canvasWidth,this.sourceCanvas.height=this.state.canvasHeight,r}}},514:(e,t,s)=>{(t=s(645)(!1)).push([e.id,'body{margin:0}.react-scaler{position:relative;width:fit-content;height:fit-content;overflow:hidden}.react-scaler .react-scaler-controls{position:absolute;background-color:#00000099;bottom:4px;left:0;right:0;display:flex;flex-direction:row}.react-scaler .react-scaler-controls .control-segment{width:33%;padding:16px 12px;position:relative}.react-scaler .react-scaler-controls .control-segment input[type="number"]{background:transparent;border:none;font-size:16px;color:#fff;font-weight:bold;outline:none}.react-scaler .react-scaler-controls .control-segment input[type="range"]{border:none;border-radius:0px;background-color:#fff;-webkit-appearance:none;height:1px;outline:none;width:100%;top:24px;position:absolute;outline:none}.react-scaler .react-scaler-controls .control-segment ::-webkit-slider-thumb{-webkit-appearance:none;background-color:#fff;height:16px;width:16px;border-radius:16px}.react-scaler .react-scaler-controls .control-segment span{color:#fff;font-family:Arial, Helvetica, sans-serif;font-weight:bold}.react-scaler .react-scaler-controls .control-segment button{cursor:pointer}.react-scaler .react-scaler-controls .control-segment .control-scale-sizes{border-right:solid 1px #FFFFFF66;margin-right:10px;padding-right:12px}.react-scaler .react-scaler-controls .control-segment:last-child{justify-content:flex-end;display:flex}.react-scaler .react-scaler-controls .control-segment:last-child button{-webkit-appearance:none;border:none;background:none;color:#FFFFFF88;text-transform:uppercase;font-weight:bold;outline:none}.react-scaler .react-scaler-controls .control-segment:last-child button:hover{color:#fff}\n',""]),e.exports=t},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=function(e,t){var s,n,r,a=e[1]||"",o=e[3];if(!o)return a;if(t&&"function"==typeof btoa){var i=(s=o,n=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(r," */")),c=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[a].concat(c).concat([i]).join("\n")}return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(r[o]=!0)}for(var i=0;i<e.length;i++){var c=[].concat(e[i]);n&&r[c[0]]||(s&&(c[2]?c[2]="".concat(s," and ").concat(c[2]):c[2]=s),t.push(c))}},t}},593:(e,t,s)=>{var n=s(514);"string"==typeof n&&(n=[[e.id,n,""]]);s(723)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},723:(e,t,s)=>{var n,r,a={},o=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=n.apply(this,arguments)),r}),i=function(e,t){return t?t.querySelector(e):document.querySelector(e)},c=function(e){var t={};return function(e,s){if("function"==typeof e)return e();if(void 0===t[e]){var n=i.call(this,e,s);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),l=null,h=0,u=[],p=s(947);function d(e,t){for(var s=0;s<e.length;s++){var n=e[s],r=a[n.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](n.parts[o]);for(;o<n.parts.length;o++)r.parts.push(y(n.parts[o],t))}else{var i=[];for(o=0;o<n.parts.length;o++)i.push(y(n.parts[o],t));a[n.id]={id:n.id,refs:1,parts:i}}}}function f(e,t){for(var s=[],n={},r=0;r<e.length;r++){var a=e[r],o=t.base?a[0]+t.base:a[0],i={css:a[1],media:a[2],sourceMap:a[3]};n[o]?n[o].parts.push(i):s.push(n[o]={id:o,parts:[i]})}return s}function g(e,t){var s=c(e.insertInto);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=u[u.length-1];if("top"===e.insertAt)n?n.nextSibling?s.insertBefore(t,n.nextSibling):s.appendChild(t):s.insertBefore(t,s.firstChild),u.push(t);else if("bottom"===e.insertAt)s.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=c(e.insertAt.before,s);s.insertBefore(t,r)}}function v(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function m(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var n=s.nc;n&&(e.attrs.nonce=n)}return b(t,e.attrs),g(e,t),t}function b(e,t){Object.keys(t).forEach((function(s){e.setAttribute(s,t[s])}))}function y(e,t){var s,n,r,a;if(t.transform&&e.css){if(!(a="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=a}if(t.singleton){var o=h++;s=l||(l=m(t)),n=x.bind(null,s,o,!1),r=x.bind(null,s,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(s=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",b(t,e.attrs),g(e,t),t}(t),n=M.bind(null,s,t),r=function(){v(s),s.href&&URL.revokeObjectURL(s.href)}):(s=m(t),n=S.bind(null,s),r=function(){v(s)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var s=f(e,t);return d(s,t),function(e){for(var n=[],r=0;r<s.length;r++){var o=s[r];(i=a[o.id]).refs--,n.push(i)}for(e&&d(f(e,t),t),r=0;r<n.length;r++){var i;if(0===(i=n[r]).refs){for(var c=0;c<i.parts.length;c++)i.parts[c]();delete a[i.id]}}}};var w,C=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function x(e,t,s,n){var r=s?"":n.css;if(e.styleSheet)e.styleSheet.cssText=C(t,r);else{var a=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function S(e,t){var s=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}function M(e,t,s){var n=s.css,r=s.sourceMap,a=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||a)&&(n=p(n)),r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(o),i&&URL.revokeObjectURL(i)}},947:e=>{e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var s=t.protocol+"//"+t.host,n=s+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,a=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(r=0===a.indexOf("//")?a:0===a.indexOf("/")?s+a:n+a.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}}},t={};function s(n){if(t[n])return t[n].exports;var r=t[n]={id:n,exports:{}};return e[n](r,r.exports,s),r.exports}return s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s(219)})();