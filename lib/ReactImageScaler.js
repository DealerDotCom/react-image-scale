module.exports=(()=>{var t={219:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>o});const n=require("react");var r=s.n(n);s(593);const a="#00000099",i="#FFFFFF";class o extends r().Component{constructor(t){super(t),this.scaleImage=this.scaleImage.bind(this),this.redrawCanvas=this.redrawCanvas.bind(this),this.eraseCanvas=this.eraseCanvas.bind(this),this.returnData=this.returnData.bind(this),this.cancelCrop=this.cancelCrop.bind(this),this.toggleMovementMode=this.toggleMovementMode.bind(this),this.setPosition=this.setPosition.bind(this),this.renderDebug=this.renderDebug.bind(this),this.renderTouchPoint=this.renderTouchPoint.bind(this),this.clearMovementMode=this.clearMovementMode.bind(this),this.checkForReset=this.checkForReset.bind(this),this.canvasRef=(0,n.createRef)(),this.scaleValueRef=(0,n.createRef)(),this.scaleValueDisplay=(0,n.createRef)(),this.rangeScaleRef=(0,n.createRef)(),this.sourceRef=(0,n.createRef)(),this.state={canvasWidth:this.props.width?this.props.width:window.innerWidth,canvasHeight:this.props.height?this.props.height:window.innerHeight,imageSource:this.props.src?this.props.src:null,backgroundColor:this.props.backgroundColor?this.props.backgroundColor:"#FFFFFF",moveSpeed:this.props.moveSpeed?this.props.moveSpeed:10}}componentDidMount(){this.props.src&&(this.rangeScaleRef.current.value=10,this.scaleValueRef.current.value=1,this.canvas=this.canvasRef.current,this.sourceCanvas=this.sourceRef.current,this.context=this.canvas.getContext("2d"),this.lastDown={x:0,y:0},this.x=0,this.y=0,this.scale=1,this.movement=!1,this.image=new Image,this.image.src=this.state.imageSource,this.image.onload=()=>{this.drawSourceCanvas(1),this.redrawCanvas(1)})}drawSourceCanvas(t){const e=this.sourceCanvas.getContext("2d"),s=this.image.width*t,n=this.image.height*t;this.sourceCanvas.width=s,this.sourceCanvas.height=n,e.clearRect(0,0,this.state.canvasWidth,this.state.canvasHeight),e.drawImage(this.image,0,0,s,n)}renderNoSource(){return r().createElement("div",{className:"scaler-no-source"},r().createElement("span",null,"Image source not provided."))}renderDebug(t){t.beginPath(),t.fillStyle=a,t.resetTransform(),t.rect(0,100,175,124),t.fill(),t.font="14px Arial",t.fillStyle=i,t.textAlign="left",t.fillText("DEBUGGER",5,116),t.fillText("INIT DOWN: {x: "+this.lastDown.x+", y: "+this.lastDown.y+"} ",5,130),this.renderTouchPoint(t)}renderTouchPoint(t){t.beginPath(),t.arc(this.lastDown.x,this.lastDown.y,2,0,2*Math.PI,!1),t.fillStyle="red",t.fill()}renderControls(){return r().createElement("div",{className:"react-scaler-controls"},r().createElement("div",{className:"control-segment"},r().createElement("span",null,"SCALE   "),r().createElement("input",{type:"number",ref:this.scaleValueRef,onChange:this.scaleImage,style:{display:"none"}}),r().createElement("span",{className:"scale-percent",ref:this.scaleValueDisplay},"%100")),r().createElement("div",{className:"control-segment"},r().createElement("input",{type:"range",ref:this.rangeScaleRef,step:this.props.scaleStep?this.props.scaleStep:"0.5",min:"1",max:this.props.maxScale?10*this.props.maxScale:30,onChange:this.scaleImage})),r().createElement("div",{className:"control-segment"},this.props.scaleSizes&&this.renderScaleSizes(),r().createElement("button",{onClick:this.cancelCrop},this.props.cancelLabel?this.props.cancelLabel:"Cancel"),r().createElement("button",{onClick:this.returnData},this.props.applyLabel?this.props.applyLabel:"Apply")))}renderCanvas(){return r().createElement(r().Fragment,null,r().createElement("div",{className:"react-scaler"},r().createElement("canvas",{ref:this.canvasRef,onMouseDown:this.toggleMovementMode,onMouseUp:this.clearMovementMode,onMouseLeave:this.clearMovementMode,onMouseMove:this.setPosition,width:this.state.canvasWidth,height:this.state.canvasHeight}),r().createElement("canvas",{style:{display:"none"},ref:this.sourceRef,width:this.state.canvasWidth,height:this.state.canvasHeight}),this.renderControls()))}renderScaleSizes(){return r().createElement("div",{className:"control-scale-sizes"},r().createElement("button",{onClick:()=>{this.redrawCanvas(.5)}},this.props.buttonMessage?this.props.buttonMessage:"0.5X"),r().createElement("button",{onClick:()=>{this.redrawCanvas(1)}},this.props.buttonMessage?this.props.buttonMessage:"1X"),r().createElement("button",{onClick:()=>{this.redrawCanvas(2)}},this.props.buttonMessage?this.props.buttonMessage:"2X"))}renderGrid(){const t=this.canvas.getContext("2d");t.strokeStyle=this.props.gridColor?this.props.gridColor:"#FFFFFF",t.lineWidth=.5,t.setLineDash([5]),t.beginPath(),t.moveTo(this.canvas.width/3,0),t.lineTo(this.canvas.width/3,this.canvas.height),t.stroke(),t.setLineDash([5]),t.beginPath(),t.strokeStyle=this.props.gridColor?this.props.gridColor:"#FFFFFF",t.moveTo(this.canvas.width/3*2,0),t.lineTo(this.canvas.width/3*2,this.canvas.height),t.stroke()}render(){return this.state.imageSource?this.renderCanvas():this.renderNoSource()}scaleImage(t){this.scale=t.target.value/10,this.checkForReset(),this.redrawCanvas(this.scale)}redrawCanvas(t){this.scale=t,console.warn(t),this.rangeScaleRef.current.value=t,this.scaleValueRef.current.value=t,this.scaleValueDisplay.current.innerText=" % "+Math.floor(100*t),this.drawSourceCanvas(t);const e=this.canvas.getContext("2d");this.eraseCanvas(e);const s=this.image.width*t,n=this.image.height*t;e.drawImage(this.image,(this.state.canvasWidth-s)/2+this.x,(this.state.canvasHeight-n)/2+this.y,s,n),this.props.displayResolution&&this.renderResolution(e,s,n),this.props.renderDebug&&this.renderDebug(e),this.props.drawGrid&&this.renderGrid()}eraseCanvas(t){t.beginPath(),t.fillStyle=this.state.backgroundColor,t.resetTransform(),t.rect(0,0,this.state.canvasWidth,this.state.canvasHeight),t.fill()}renderResolution(t,e,s){t.beginPath(),t.fillStyle=a,t.resetTransform(),t.rect(0,0,90,24),t.fill(),t.font="14px Arial",t.fillStyle=i,t.textAlign="center",t.fillText(Math.floor(e)+" X "+Math.floor(s),45,16)}returnData(){return this.props.onScaleApply&&"function"==typeof this.props.onScaleApply&&this.props.onScaleApply(this.processImageData()),null}cancelCrop(){return this.props.onCancel&&"function"==typeof this.props.onCancel&&this.props.onCancel(),null}toggleMovementMode(t){const e=this.image.width*this.scale>this.state.canvasWidth,s=this.image.height*this.scale>this.state.canvasHeight;if(e||s){this.movement=!0,document.body.style.cursor="move";const e=t.target.getBoundingClientRect();this.lastDown={x:t.clientX-e.left,y:t.clientY-e.top},this.redrawCanvas(this.scale)}}clearMovementMode(){document.body.style.cursor="default",this.movement=!1,this.lastDown={x:0,y:0},this.redrawCanvas(this.scale)}setPosition(t){if(this.movement){const e=t.target.getBoundingClientRect(),s={x:t.clientX-e.left,y:t.clientY-e.top};s.x>this.lastDown.x?this.x+=Math.abs(this.lastDown.x-s.x):this.x-=Math.abs(this.lastDown.x-s.x),s.y>this.lastDown.y?this.y+=Math.abs(this.lastDown.y-s.y):this.y-=Math.abs(this.lastDown.y-s.y),this.lastDown=s,this.redrawCanvas(this.scale)}}checkForReset(){const t=this.image.width*this.scale<this.state.canvasWidth,e=this.image.height*this.scale<this.state.canvasHeight;(t||e)&&(this.x=0,this.y=0)}determineCrop(t,e){const s=this.image.width*e+this.x,n=this.image.height*e+this.y,r=s<this.canvas.width,a=n<this.canvas.height,i=t.getImageData(r?(this.sourceCanvas.width-s)/2+this.x:0,a?(this.sourceCanvas.height-n)/2+this.y:0,s,n);return r&&(this.sourceCanvas.width=s),a&&(this.sourceCanvas.height=n),i}async processImageData(){const t=this.scaleValueRef.current.value,e=(this.canvas.getContext("2d"),this.sourceCanvas.getContext("2d")),s=e.getImageData(0,0,this.state.canvasWidth,this.state.canvasHeight);e.putImageData(s,0,0);const n=this.determineCrop(e,t);e.putImageData(n,0,0);const r=await this.sourceCanvas.toDataURL();return this.sourceCanvas.width=this.state.canvasWidth,this.sourceCanvas.height=this.state.canvasHeight,r}}},514:(t,e,s)=>{(e=s(645)(!1)).push([t.id,'body{margin:0}.react-scaler{position:relative;width:fit-content;height:fit-content;overflow:hidden}.react-scaler .react-scaler-controls{position:absolute;background-color:#00000099;bottom:4px;left:0;right:0;display:flex;flex-direction:row}.react-scaler .react-scaler-controls .control-segment{width:33%;padding:16px 12px;position:relative}.react-scaler .react-scaler-controls .control-segment input[type="number"]{background:transparent;border:none;font-size:16px;color:#fff;font-weight:bold;outline:none}.react-scaler .react-scaler-controls .control-segment input[type="range"]{border:none;border-radius:0px;background-color:#fff;-webkit-appearance:none;height:1px;outline:none;width:100%;top:24px;position:absolute;outline:none}.react-scaler .react-scaler-controls .control-segment ::-webkit-slider-thumb{-webkit-appearance:none;background-color:#fff;height:16px;width:16px;border-radius:16px}.react-scaler .react-scaler-controls .control-segment span{color:#fff;font-family:Arial, Helvetica, sans-serif;font-weight:bold}.react-scaler .react-scaler-controls .control-segment button{cursor:pointer}.react-scaler .react-scaler-controls .control-segment .control-scale-sizes{border-right:solid 1px #FFFFFF66;margin-right:10px;padding-right:12px}.react-scaler .react-scaler-controls .control-segment:last-child{justify-content:flex-end;display:flex}.react-scaler .react-scaler-controls .control-segment:last-child button{-webkit-appearance:none;border:none;background:none;color:#FFFFFF88;text-transform:uppercase;font-weight:bold;outline:none}.react-scaler .react-scaler-controls .control-segment:last-child button:hover{color:#fff}\n',""]),t.exports=e},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s=function(t,e){var s,n,r,a=t[1]||"",i=t[3];if(!i)return a;if(e&&"function"==typeof btoa){var o=(s=i,n=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(r," */")),c=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[a].concat(c).concat([o]).join("\n")}return[a].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(s,"}"):s})).join("")},e.i=function(t,s,n){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(n)for(var a=0;a<this.length;a++){var i=this[a][0];null!=i&&(r[i]=!0)}for(var o=0;o<t.length;o++){var c=[].concat(t[o]);n&&r[c[0]]||(s&&(c[2]?c[2]="".concat(s," and ").concat(c[2]):c[2]=s),e.push(c))}},e}},593:(t,e,s)=>{var n=s(514);"string"==typeof n&&(n=[[t.id,n,""]]);s(723)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(t.exports=n.locals)},723:(t,e,s)=>{var n,r,a={},i=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=n.apply(this,arguments)),r}),o=function(t,e){return e?e.querySelector(t):document.querySelector(t)},c=function(t){var e={};return function(t,s){if("function"==typeof t)return t();if(void 0===e[t]){var n=o.call(this,t,s);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),l=null,h=0,u=[],p=s(947);function d(t,e){for(var s=0;s<t.length;s++){var n=t[s],r=a[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(y(n.parts[i],e))}else{var o=[];for(i=0;i<n.parts.length;i++)o.push(y(n.parts[i],e));a[n.id]={id:n.id,refs:1,parts:o}}}}function f(t,e){for(var s=[],n={},r=0;r<t.length;r++){var a=t[r],i=e.base?a[0]+e.base:a[0],o={css:a[1],media:a[2],sourceMap:a[3]};n[i]?n[i].parts.push(o):s.push(n[i]={id:i,parts:[o]})}return s}function g(t,e){var s=c(t.insertInto);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=u[u.length-1];if("top"===t.insertAt)n?n.nextSibling?s.insertBefore(e,n.nextSibling):s.appendChild(e):s.insertBefore(e,s.firstChild),u.push(e);else if("bottom"===t.insertAt)s.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=c(t.insertAt.before,s);s.insertBefore(e,r)}}function v(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);e>=0&&u.splice(e,1)}function m(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var n=s.nc;n&&(t.attrs.nonce=n)}return b(e,t.attrs),g(t,e),e}function b(t,e){Object.keys(e).forEach((function(s){t.setAttribute(s,e[s])}))}function y(t,e){var s,n,r,a;if(e.transform&&t.css){if(!(a="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=a}if(e.singleton){var i=h++;s=l||(l=m(e)),n=x.bind(null,s,i,!1),r=x.bind(null,s,i,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(s=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",b(e,t.attrs),g(t,e),e}(e),n=M.bind(null,s,e),r=function(){v(s),s.href&&URL.revokeObjectURL(s.href)}):(s=m(e),n=S.bind(null,s),r=function(){v(s)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else r()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=i()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var s=f(t,e);return d(s,e),function(t){for(var n=[],r=0;r<s.length;r++){var i=s[r];(o=a[i.id]).refs--,n.push(o)}for(t&&d(f(t,e),e),r=0;r<n.length;r++){var o;if(0===(o=n[r]).refs){for(var c=0;c<o.parts.length;c++)o.parts[c]();delete a[o.id]}}}};var w,C=(w=[],function(t,e){return w[t]=e,w.filter(Boolean).join("\n")});function x(t,e,s,n){var r=s?"":n.css;if(t.styleSheet)t.styleSheet.cssText=C(e,r);else{var a=document.createTextNode(r),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(a,i[e]):t.appendChild(a)}}function S(t,e){var s=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=s;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(s))}}function M(t,e,s){var n=s.css,r=s.sourceMap,a=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||a)&&(n=p(n)),r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}},947:t=>{t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var s=e.protocol+"//"+e.host,n=s+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var r,a=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?t:(r=0===a.indexOf("//")?a:0===a.indexOf("/")?s+a:n+a.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}}},e={};function s(n){if(e[n])return e[n].exports;var r=e[n]={id:n,exports:{}};return t[n](r,r.exports,s),r.exports}return s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s(219)})();